<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
  <head>
    <!--
      Copyright (c) 2006-2011 Krell Institute. All Rights Reserved.
      Permission is granted to copy, distribute and/or modify this document
      under the terms of the GNU Free Documentation License, Version 1.2
      or any later version published by the Free Software Foundation;
      with no Invariant Sections, no Front-Cover Texts, and no Back-Cover
         Texts.  A copy of the license is included in the section entitled "GNU
      Free Documentation License".
-->
    <meta http-equiv="Content-Type" content="text/html;
      charset=ISO-8859-1">
    <title>Open Speed Shop: GUI Interface Overview</title>
    <link href="doxygen.css" rel="stylesheet" type="text/css">
  </head>
  <body>
    <!-- Generated by Doxygen 1.3.6 -->
    <h1><a name="mozTocId949225" class="mozTocH1"></a>GUI Interface
      Overview </h1>
    <p> </p>
    <h2><a name="mozTocId172027" class="mozTocH2"></a><span
        style="font-weight: bold;">Version 2.0.2 Release: November 9,
        2012<br>
      </span></h2>
    <br>
    <br>
    <h2><a name="mozTocId353558" class="mozTocH2"></a><a class="anchor"
        name="TableofContents">Table of Contents<br>
      </a></h2>
    <br>
    <ul id="mozToc">
      <!--mozToc h1 1 h2 2 h3 3 h4 4 h5 5 h6 6-->
      <li><a href="#mozTocId949225">GUI Interface Overview </a>
        <ul>
          <li><a href="#mozTocId172027">Version 2.0.2 Release - March
              15, 2012 </a></li>
          <li><a href="#mozTocId353558">Table of Contents </a></li>
          <li><a href="#mozTocId646582">The Goal</a></li>
          <li><a href="#mozTocId59017">The GUI Infrastructure</a>
            <ul>
              <li><a href="#mozTocId381424">The Main Window</a></li>
              <li><a href="#mozTocId462713">PanelContainers</a></li>
              <li><a href="#mozTocId275134">Panels</a></li>
              <li><a href="#mozTocId749963">Wizard Panel:</a></li>
              <li><a href="#mozTocId229650">Top Panel:</a></li>
              <li><a href="#mozTocId401527">Source Panel </a></li>
            </ul>
          </li>
          <li><a href="#mozTocId641342">Why Panel Plugins?</a></li>
          <li><a href="#mozTocId448594">All The To-Do About Dynamic GUI
              Plugins.</a></li>
          <li><a href="#mozTocId288154"> Into To How The GUI Launches
              Itself.</a></li>
          <li><a href="#mozTocId712666">How do I create the initial
              panel structure?</a></li>
          <li><a href="#mozTocId626863">What Panels To Provide by
              Default?</a>
            <ul>
              <li><a href="#mozTocId315559">User time experiment </a></li>
              <li><a href="#mozTocId983135">Input/output experiment </a></li>
              <li><a href="#mozTocId371788">Hardware counter experiment
                </a></li>
              <li><a href="#mozTocId445326">PC sampling experiment </a></li>
              <li><a href="#mozTocId482963">MPI tracing experiment </a></li>
            </ul>
          </li>
        </ul>
      </li>
    </ul>
    <h2><a name="mozTocId646582" class="mozTocH2"></a><a class="anchor"
        name="intro_the_goal">The Goal</a></h2>
    The goal of the GUI is to provide an intuitive, easy to use, portal
    to an otherwise complex and overwhelming application. In the case of
    Open Speed Shop, we are attempting to put an intuitive interface
    between the user and their applications performance experiment. It's
    a layer that will help the user ask the correct questions and get
    the correct meaningful answer back regarding, "Where is my
    application spending all its time and how can I make it go faster."
    <p>One objective to this goal is to provide a GUI framework that
      will provide common consistent base functionality. One that will
      prevent a complex set of tools from getting window-itis, yet
      providing the user with all the necessary control and clues/hints
      to achieve their end goal. The GUI base will also provide the
      necessary flexibility to add new functionality as other developers
      begin to develop add-ons (plugins) to improve the core set of
      tools provided.</p>
    <h2><a name="mozTocId59017" class="mozTocH2"></a><a class="anchor"
        name="intro_to_gui_section">The GUI Infrastructure</a></h2>
    The GUI is broken into 3 basic parts. The Main Window,
    PanelContainers, and Panels.
    <h3><a name="mozTocId381424" class="mozTocH3"></a><a class="anchor"
        name="intro_to_mainwindow">The Main Window</a></h3>
    There is only one Main Window and it is the owner of the master <a
      class="el" href="GUI/html/classPanelContainer.html">PanelContainer</a>.
    There is only one master <a class="el"
      href="GUI/html/classPanelContainer.html">PanelContainer</a> and
    when it is closed, the GUI exits.
    <p>The Main Window will handle high level commands like managing the
      main menu toolbar. This menu bar is dynamically created from the
      list of dynamic GUI plugins.</p>
    <h3><a name="mozTocId462713" class="mozTocH3"></a><a class="anchor"
        name="intro_to_panel_containers">PanelContainers</a></h3>
    The PanelContainers will provide all the underlying support for
    screen layout, local menu management, dive management, drag-n-drop,
    and communication broker.
    <p>A <a class="el" href="GUI/html/classPanelContainer.html">PanelContainer</a>
      is an area (container) on the screen where Panels can be placed
      and managed.</p>
    <p>Each <a class="el" href="GUI/html/classPanelContainer.html">PanelContainer</a>
      will have a simple communication broker to allow Panels to
      communicate between local and remote Panels.</p>
    <p>A <a class="el" href="GUI/html/classPanelContainer.html">PanelContainer</a>
      is responsible for interacting with the user, via the <a
        class="el" href="GUI/html/classPanelContainer.html">PanelContainer</a>
      menu, to add, delete, resize, or move Panels.</p>
    <p>A <a class="el" href="GUI/html/classPanelContainer.html">PanelContainer</a>
      can be split either horizontally or vertically into 2
      PanelContainers. A <a class="el"
        href="GUI/html/classPanelContainer.html">PanelContainer</a> can
      contain, one, many, or no Panels. A <a class="el"
        href="GUI/html/classPanelContainer.html">PanelContainer</a> has
      no specific knowledge of what a <a class="el"
        href="GUI/html/classPanel.html">Panel</a> is doing. (i.e. I
      doesn't know anything about experiments. It just manages the
      Panels space and any communication with other Panels.)</p>
    <h3><a name="mozTocId275134" class="mozTocH3"></a><a class="anchor"
        name="intro_to_panels">Panels</a></h3>
    A <a class="el" href="GUI/html/classPanel.html">Panel</a> is where
    all the nuts-n-bolts knowledge and logic exists for an individual
    task.
    <p>They will handle <a class="el" href="GUI/html/classPanel.html">Panel</a>
      specific user interaction and interaction with the Framework.</p>
    <p>A <a class="el" href="GUI/html/classPanel.html">Panel</a> is
      placed in a <a class="el"
        href="GUI/html/classPanelContainer.html">PanelContainer</a>.
      Each <a class="el" href="GUI/html/classPanel.html">Panel</a> is
      managed by its <a class="el"
        href="GUI/html/classPanelContainer.html">PanelContainer</a>. A <a
        class="el" href="GUI/html/classPanel.html">Panel</a> is the base
      handle for all views. That is each user defined <a class="el"
        href="GUI/html/classPanel.html">Panel</a> (i.e. performance
      experiment type) will have a <a class="el"
        href="GUI/html/classPanel.html">Panel</a> type derived from a
      base class <a class="el" href="GUI/html/classPanel.html">Panel</a>.
      Examples of <a class="el" href="GUI/html/classPanel.html">Panel</a>
      types and their functions would be:</p>
    <p></p>
    <dl compact="compact">
      <dt><br>
      </dt>
    </dl>
    <h3><a name="mozTocId749963" class="mozTocH3"></a><small><b>Wizard
          Panel:</b></small></h3>
    <dl compact="compact">
      <dd>The Wizard <a class="el" href="GUI/html/classPanel.html">Panel</a>
        would be responsible for interviewing the user to aid them in
        selecting the right performance tool for the job. After the
        interview process was completed a command would be passed to the
        Framework for action. Upon completion the user would be notified
        and an appropriate (default) report (Experiment <a class="el"
          href="GUI/html/classPanel.html">Panel</a>) would be generated
        for the user. </dd>
    </dl>
    <dl compact="compact">
      <dt><br>
      </dt>
    </dl>
    <h3><a name="mozTocId229650" class="mozTocH3"></a><small><b>Top
          Panel:</b></small></h3>
    <div style="margin-left: 40px;">The Top <a class="el"
        href="GUI/html/classPanel.html">Panel</a> would be responsible
      for displaying the top 'n' metrics from a Collector. It would
      provide the implementation for fielding requests to find more
      information about a selected item and for sending source position
      updates to a Source <a class="el" href="GUI/html/classPanel.html">Panel</a>.
    </div>
    <dl compact="compact">
      <dt><br>
      </dt>
    </dl>
    <h3><a name="mozTocId401527" class="mozTocH3"></a><small><b>Source
          Panel</b></small><br>
    </h3>
    <dl compact="compact">
      <dd>The Source <a class="el" href="GUI/html/classPanel.html">Panel</a>
        would be responsible for displaying source files to the screen.
        It would provide functionality to display line numbers, search,
        highlight line segments, and field dive request for more
        information about specific lines. </dd>
    </dl>
    <dl compact="compact">
      <dt><b>o ...</b></dt>
      <dd><br>
      </dd>
    </dl>
    Panels will look like a "tabbed" view. A <a class="el"
      href="GUI/html/classPanel.html">Panel</a> can be moved around to
    be placed near other Panels for association (communication) to be
    granted. An example of this could be a User Time <a class="el"
      href="GUI/html/classPanel.html">Panel</a> could be placed near and
    existing Source <a class="el" href="GUI/html/classPanel.html">Panel</a>,
    when the user clicks on an object in the User Time <a class="el"
      href="GUI/html/classPanel.html">Panel</a> that relates to a source
    line, the nearest Source <a class="el"
      href="GUI/html/classPanel.html">Panel</a> would be updated
    (repositioned) to that source line.
    <h2><a name="mozTocId641342" class="mozTocH2"></a><a class="anchor"
        name="intro_to_panel_plugins">Why Panel Plugins?</a></h2>
    Panels will be loaded as plugins. It will be the MainWindow's
    responsibility to locate and configure the GUI to interact with
    whatever plugins are currently located on the system. The
    MainWindow's menus will need to be dynamically configured based on
    the available plugins. A plugin directory (directories) will exist
    with dynamic libraries to be loaded. The dynamic libraries may be
    visible upon loading, or later (on demand), depending on their type.
    <p>Using plugin technology allows for ease of exending this tool in
      the future. It also will keep this tool very lightweight as only
      the functionality requested needs to be loaded.</p>
    <h2><a name="mozTocId448594" class="mozTocH2"></a><a class="anchor"
        name="intro_to_gui_plugins">All The To-Do About Dynamic GUI
        Plugins.</a></h2>
    A dynamic plugin is a GUI component. A visible or hidden <a
      class="el" href="GUI/html/classPanel.html">Panel</a>. Each plugin
    includes the following information to a common structure in the
    panel description.
    <p>At initialization the default location (yet to be determined) or
      an environment variable FUTURE_TOOL_PLUGIN_DIR is check for the
      available plugins. Each plugin is openned and a menu structure is
      created from the plugin header information.</p>
    <p>Here's what the plugin header information contains:</p>
    <p>local_plugin_info.h</p>
    <p></p>
    <ul>
      <li>plugin_entry-&gt;grouping = "PLUGIN_GROUPING";
        <dl compact="compact">
          <dt><b>Grouping:</b></dt>
          <dd>A general grouping name such as, Performance, Debugging,
            Static Analysis, ... Currently only "Performance" is being
            used. </dd>
        </dl>
      </li>
      <li>plugin_entry-&gt;show_immediate = SHOW_IMMEDIATE;
        <dl compact="compact">
          <dt><b>Show Immediate:</b></dt>
          <dd>After loading the plugin file, load the panel to a panel
            container. </dd>
        </dl>
      </li>
      <li>plugin_entry-&gt;plugin_description = "PLUGIN_DESCRIPTION";
        <dl compact="compact">
          <dt><b>Plugin Description:</b></dt>
          <dd>A short description of the plugin panel (We'll show this
            with 'about' help.) </dd>
        </dl>
      </li>
      <li>plugin_entry-&gt;plugin_name = "libTemplatePanel.so";
        <dl compact="compact">
          <dt><b>Plugin Name:</b></dt>
          <dd>This is the dso name (Yes, it's redundant.) </dd>
        </dl>
      </li>
      <li>plugin_entry-&gt;plugin_location = "$FUTURE_TOOL_PLUGIN_DIR";
        <dl compact="compact">
          <dt><b>Plugin Location:</b></dt>
          <dd>This is a dynamic absolute path to the dso. </dd>
        </dl>
      </li>
      <li>plugin_entry-&gt;plugin_entry_point = "panel_init";
        <dl compact="compact">
          <dt><b>Plugin Entry Point:</b></dt>
          <dd>The generic entry point that is called to do the menu add.
            This is separate from <a class="el"
              href="GUI/html/pc__plugin_8cxx.html#a1">_init()</a> to
            allow the user to still do 'other' initialization if they
            need to before calling <a class="el"
              href="GUI/html/plugin__entry__point_8hxx.html#a2">panel_init()</a>.
          </dd>
        </dl>
      </li>
      <li>plugin_entry-&gt;menu_heading = "MENU_HEADING";
        <dl compact="compact">
          <dt><b>Menu Heading:</b></dt>
          <dd>This is the actual heading that will be put to the
            toplevel menu headings (The <a class="el"
              href="GUI/html/plugin__entry__point_8hxx.html#a2">panel_init()</a>
            function will loop through existing headers to see if it
            needs to add this header or use an existing one.) </dd>
        </dl>
      </li>
      <li>plugin_entry-&gt;menu_label = "MENU_LABEL";
        <dl compact="compact">
          <dt><b>Menu Label:</b></dt>
          <dd>This is the menu entry under the "Menu Heading", added to
            the end of the list. </dd>
        </dl>
      </li>
      <li>plugin_entry-&gt;menu_accel = "MENU_ACCEL";
        <dl compact="compact">
          <dt><b>Menu Accel:</b></dt>
          <dd>This will set the menu accelerator for this menu item.
            Note: It is the panel designers responsiblity to check for
            conflicts. </dd>
        </dl>
      </li>
      <li>plugin_entry-&gt;panel_type = "MENU_LABEL";
        <dl compact="compact">
          <dt><b>Panel Type:</b></dt>
          <dd>This is a unique string describing the panel type.</dd>
        </dl>
      </li>
    </ul>
    <h2><a name="mozTocId288154" class="mozTocH2"></a><a class="anchor"
        name="intro_to_starting_gui"> Into To How The GUI Launches
        Itself.</a></h2>
    The GUI is bundled into a dynamic library that is loaded on demand.
    It's the *Command Line Interface (CLI) that launches the GUI. By
    default the CLI will launch the GUI upon invocation of the <a
      class="el" href="Framework/html/namespaceOpenSpeedShop.html">OpenSpeedShop</a>
    tool. However, the CLI can be started without starting the GUI ($
    oss -cli) and then the GUI can loaded and initialize when needed.
    <p>Upon invoking <a class="el"
        href="Framework/html/namespaceOpenSpeedShop.html">OpenSpeedShop</a>
      ($ oss) the command line is parsed, and if the GUI is requested
      the GUI library is loaded and launched. We then drop into an event
      loop that parsed both command lines and GUI events.</p>
    <p>When the GUI is loaded, the GUI looks for GUI plugins in the
      default directory and in the FUTURE_TOOL_PLUGIN_DIR environment
      variable path. Each file in the directory is opened and an
      internal entry point is queried. If found the plugin manager calls
      the entry point, initializes any exported menus, brings up the
      GUI, then drops into the main event loop waiting for user
      interaction.</p>
    <h2><a name="mozTocId712666" class="mozTocH2"></a><a class="anchor"
        name="intro_to_creating_a_panel">How do I create the initial
        panel structure?</a></h2>
    There's a script 'mknewpanel' in the <a class="el"
      href="GUI/html/classTemplatePanel.html">TemplatePanel</a>
    directory. (.../Panels/TemplatePanel). Type in 'mknewpanel' to get a
    usage command.
    <p>An example to create a new panel template for a panel called
      "TreePanel" would be to type:</p>
    <p>$ cd Panels/TemplatePanel</p>
    <p>$ mknewpanel ../TreePanel TreePanel Performance "Tree Panel" 0
      Performance</p>
    <p>This will create a new Panels directory (TreePanel), name the new
      panel "TreePanel", and a menu item "Tree Panel" will be placed
      under the menu entry "Performance". It won't be shown initially
      (i.e. '0') and it will be associated with the "Performance" group.</p>
    <h2><a name="mozTocId626863" class="mozTocH2"></a><a class="anchor"
        name="intro_to_default_panels">What Panels To Provide by
        Default?</a></h2>
    <h3><a name="mozTocId315559" class="mozTocH3"></a><dt><small><b>User
            time experiment</b></small></dt>
      <dd><small><br>
        </small></dd>
    </h3>
    <h3><a name="mozTocId983135" class="mozTocH3"></a><dt><small><b>Input/output

            experiment</b></small></dt>
      <dd><small><br>
        </small></dd>
    </h3>
    <h3><a name="mozTocId371788" class="mozTocH3"></a><dt><small><b>Hardware

            counter experiment</b></small></dt>
      <dd><small><br>
        </small></dd>
    </h3>
    <h3><a name="mozTocId445326" class="mozTocH3"></a><dt><small><b>PC
            sampling experiment</b></small></dt>
      <dd><small><br>
        </small></dd>
    </h3>
    <h3><a name="mozTocId482963" class="mozTocH3"></a><dt><small><b>MPI
            tracing experiment</b></small></dt>
      <dd><br>
      </dd>
    </h3>
    <hr size="1">
    <address style=""><small>Generated on Wed Sep 22 05:34:00 2004 for
        Open Speed Shop by <a href="http://www.doxygen.org/index.html"><img
            src="doxygen.png" alt="doxygen" align="middle" border="0"> </a>1.3.6

      </small></address>
  </body>
</html>
