<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
  <head>
    <meta http-equiv="content-type" content="text/html;
      charset=ISO-8859-1">
    <title>Using Open|SpeedShop&#8482;</title>
    <style type="text/css">
table.exp {
	border-width: 0px 0px 0px 0px;
	border-spacing: 0px;
	border-style: outset outset outset outset;
	border-color: gray gray gray gray;
	border-collapse: collapse;
	background-color: white;
	width:80%;
	height:80%;
}
table.exp th {
	border-width: 1px 1px 1px 1px;
	padding: 7px 7px 7px 7px;
	border-style: inset inset inset inset;
	border-color: gray gray gray gray;
	background-color: white;
	-moz-border-radius: 0px 0px 0px 0px;
}
table.exp td {
	border-width: 1px 1px 1px 1px;
	padding: 7px 7px 7px 7px;
	border-style: inset inset inset inset;
	border-color: gray gray gray gray;
	background-color: white;
	-moz-border-radius: 0px 0px 0px 0px;
}
  </style>
  </head>
  <body>
    <br>
    <center> <img src="../img/OpenSpeedShop_Logo.jpg"> <br>
      <big>Using Open|SpeedShop&#8482;</big><br>
    </center>
    <h2 id="climpi">Examples using Open|SpeedShop for Performance
      Analysis of Hybrid (MPI and openMP) applications<br>
    </h2>
    <p><small style="font-family: Courier New,Courier,monospace;">We
        have run Open|SpeedShop convenience script on the NPB-MZ BT
        program and created a database file that has 4 ranks each of
        which has 4 underlying openMP threads.</small></p>
    <p><small style="font-family: Courier New,Courier,monospace;">Within
        a terminal window, enter</small><span style="font-family:
        Courier New,Courier,monospace;">:</span>&nbsp; <b><font
          face="courier"><br>
          openss -f bt-mz.B.4-pcsamp-1.openss<br>
        </font></b><font face="courier"><br>
      </font></p>
    Changes have been added to Open|SpeedShop 2.0.1 to better support
    the analysis of hybrid applications which will be outlined below.<br>
    <br>
    Here we show the aggregated results relative to statements in the
    application.&nbsp; So, we are showing the statements that took the
    most time in the job.&nbsp; For this execution of BT, statement 440
    took the most time.&nbsp; By double clicking on the statement
    Open|SpeedShop focuses on the source for that line of the
    application source and highlights that line.&nbsp;&nbsp; Note, in
    this view we moved the ManageProcess tab to the lower panel and
    split the upper panel using the vertical splitter icon on the far
    right side of the original upper panel.<br>
    <br>
    <p> <img style=" width: 1087px; height: 727px;" alt="source view"
        src="../img/hybrid-rank-aggregated-stmt-taking-most-time.png"><br>
    </p>
    &nbsp; Here we used the ManageProcess panel to highlight one rank
    and an individual thread within the rank to show only that threads <br>
    &nbsp; performance data in the Stats Panel view.&nbsp;&nbsp;&nbsp;
    Note: Use the focus on threads and processes Manage Process panel
    option to<br>
    &nbsp; focus on individual threads within a rank.&nbsp;&nbsp;&nbsp;
    Right mouse button down on the Manage Process panel tab to see the
    options.<br>
    <br>
    <img style=" width: 1087px; height: 727px;" alt="individual threads"
      src="../img/hybrid-focus-on-individual-rank-and-thread.png"><br>
    <br>
    &nbsp; Here we used the ManageProcess panel to highlight one rank to
    show the data from all the threads that are executed under <br>
    &nbsp; that particular rank in order to see the performance data in
    the Stats Panel view.&nbsp;&nbsp;&nbsp; Note: Use the "focus on
    selected rank and underlying<br>
    &nbsp; threads" Manage Process panel option to focus on all the
    threads within a rank.&nbsp;&nbsp;&nbsp; Right mouse button down on
    the Manage Process <br>
    &nbsp; panel tab to see the options.<br>
    <br>
    <br>
    <img style="width: 1079px; height: 674px;" alt="Underlying threads
      view"
src="../img/hybrid-focus-on-individual-rank-and-all-underlying-threads.png"><br>
    <br>
    Note:&nbsp; Once you focus on individual or groups of ranks, e.g.
    venturing away from the default aggregated views, then you need to
    use<br>
    the "CL" clear auxillary setting icon to clear away all the optional
    selections and get back to looking at the aggregated results again.<br>
    <br>
    <img style=" width: 1087px; height: 727px;" alt="clear icon"
      src="../img/hybrid-clear-rank-thread-specific-settings.png"><br>
    <br>
    After clearing the specific rank and/or thread selections, we can
    click the "LB" load balance icon and Open|SpeedShop will display<br>
    the min, max, average values across all the ranks in the hybrid
    code.&nbsp; This helps decide if there is imbalance across the ranks
    of<br>
    the hybrid application.&nbsp;&nbsp; We can focus on individual ranks
    to see the balance across the openMP threads that are in an
    individual <br>
    rank (next example image).<br>
    <br>
    <p><img style=" width: 1087px; height: 727px;" alt="LB aggregated"
        src="../img/hybrid-aggregated-rank-loadbalance.png"><br>
    </p>
    Here we used the Manage Process panel "Focus on selected rank and
    underlying threads" menu options to view the load balance<br>
    across the 4 openMP threads for the rank 0 process.<br>
    <br>
    <img style=" width: 1087px; height: 727px;" alt="rank 0 openMP
      threads" src="../img/hybrid-load-balance-on-rank0s-threads.png"><br>
    <br>
    <br>
    <br>
    Please also explore the various options offered via a panel's pull
    down menu. Further options can be accessed by clicking on a colored
    <br>
    downward-facing arrow or using the StatsPanel icons.&nbsp; Red icons
    represent view options, such as updating the data or clearing the <br>
    view options. The "green" icons correspond to different possible
    views of the performance data.&nbsp;&nbsp; The "dark blue" icons
    correspond <br>
    to analysis options while the "light blue" icon corresponds to
    information about the experiment.&nbsp; There is context sensitive
    text that <br>
    is shown when you hover over the icons.<br>
    <br>
    Thanks!<br>
    <br>
    Please visit the Open|SpeedShop forum if you have questions:&nbsp; <a
      href="http://www.openspeedshop.org/forums/index.php">Open|SpeedShop
      Forum.</a><br>
    <br>
    <a href="../index.html">Back To Getting Started With Open|SpeedShop</a>
  </body>
</html>
